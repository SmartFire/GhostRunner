@{
    Layout = "~/Views/Shared/_Schedule.cshtml";
}
@model GhostRunner.ViewModels.Schedule.IndexModel

<script language="javascript" type="text/javascript">
    function scheduleItem() {
        $.ajax({
            url: '@Url.Action("GetAddScheduledItemDialog", "Schedule")',
            type: "GET",
            data: {
                projectId: '@Model.Project.ExternalId'
            },
            success: function (response) {
                $("#modal-overlay").empty();
                $("#modal-overlay").html(response);
                $("#modal-overlay").show();
            }
        });
    }

    $(document).ready(function () {
        $('#schedule-nav').click(function () {
            window.location.href = '@Url.Action("Index/" + Model.Project.ExternalId, "Schedule")';
        });

        $('#sequences-nav').click(function () {
            window.location.href = '@Url.Action("Index/" + Model.Project.ExternalId, "Sequences")';
        });

        $('#scripts-nav').click(function () {
            window.location.href = '@Url.Action("Index/" + Model.Project.ExternalId, "Scripts")';
        });

        $('#back-to-projects').click(function () {
            window.location.href = '@Url.Action("Index", "Main")';
        });
    });
</script>

<div class="header-bar">
    <img id="logo" src="~/Images/logo.png" class="left" />
    <div id="logo-title" class="left">GhostRunner</div>
    <div id="action-container" class="right">
        <div id="user-profile-menu" class="right button-padding"><button>@Model.User.Name</button></div>
        <div class="right"><button id="back-to-projects">Back to Projects</button></div>
    </div>
    <div class="clear"></div>
</div>
<div id="page-content">
    <div id="page-navigation">
        <ul class="left">
            <li id="schedule-nav" class="selected">Schedule</li>
            <li id="sequences-nav">Sequences</li>
            <li id="scripts-nav">Scripts</li>
        </ul>
        <div class="header-button right"><button id="create-script-button" onclick="scheduleItem()">Add</button></div>
        <div class="clear"></div>
    </div>
    <div id="main" class="page-panel">
        @if (Model.ScheduleItems.Count > 0)
        {
            if (Model.HasDailyItems())
            {
                <div class="item-container">
                    <div class="title">Daily</div>
                    @foreach (IScheduleItem scheduleItem in Model.GetDailyItems())
                    {
                        <div class="item-container scheduled">
                            <div class="schedule-title">@scheduleItem.Name</div>
                            <div class="schedule-time">@scheduleItem.ScheduleDetail</div>
                        </div>
                    }
                </div>
            }
            if (Model.HasWeeklyItems())
            {
                <div class="item-container">
                    <div class="title">Weekly</div>
                    @foreach (IScheduleItem scheduleItem in Model.GetWeeklyItems())
                    {
                        <div class="item-container scheduled">
                            <div class="schedule-title">@scheduleItem.Name</div>
                            <div class="schedule-time">@scheduleItem.ScheduleDetail</div>
                        </div>
                    }
                </div>
            }
            if (Model.HasMonthlyItems())
            {
                <div class="item-container">
                    <div class="title">Monthly</div>
                    @foreach (IScheduleItem scheduleItem in Model.GetMonthlyItems())
                    {
                        <div class="item-container scheduled">
                            <div class="schedule-title">@scheduleItem.Name</div>
                            <div class="schedule-time">@scheduleItem.ScheduleDetail</div>
                        </div>
                    }
                </div>
            }
        }
        else
        {
            <div class="none-defined">You currently have nothing scheduled</div>
        }
    </div>
</div>